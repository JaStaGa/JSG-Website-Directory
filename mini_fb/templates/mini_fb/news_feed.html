<!-- mini_fb/news_feed.html -->
{% extends 'mini_fb/base.html' %}
{% block content %}
<div class="container">
    <section class="news-feed">
        <header class="news-feed-header">
            <h1>News Feed for {{ profile.first_name }} {{ profile.last_name }}</h1>
            <a href="{% url 'show_profile' profile.pk %}" class="btn secondary">‚Üê Back to Profile</a>
        </header>

        {% for message in news_feed %}
        <div class="newsfeed_item status-card">
            <div class="newsfeed_header">
                <a href="{% url 'show_profile' message.profile.pk %}" class="newsfeed_profile">
                    {% if message.profile.image_file %}
                    <img src="{{ message.profile.image_file.url }}" alt="{{ message.profile.first_name }}"
                        class="profile-thumb">
                    {% else %}
                    <div class="profile-thumb placeholder"></div>
                    {% endif %}
                    <strong>{{ message.profile.first_name }} {{ message.profile.last_name }}</strong>
                </a>
                <span class="timestamp">{{ message.timestamp|date:"M j, Y H:i" }}</span>
            </div>

            <p class="content">{{ message.message }}</p>

            {% if message.get_images %}
            <div class="newsfeed_images">
                {% for img in message.get_images %}
                <img src="{{ img.image_file.url }}" alt="Attached image" class="attached-image">
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% empty %}
        <p>No status messages to show.</p>
        {% endfor %}
    </section>
</div>
{% endblock %}