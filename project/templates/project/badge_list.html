<!-- project/badge_list.html -->

{% extends 'project/base.html' %}
{% block title %}Badges{% endblock %}
{% block content %}

<form method="get" class="badge-filter-form">
  <!-- Category -->
  <label>
    Category:
    <select name="category">
      <option value="">All</option>
      {% for cat in all_categories %}
        <option
          value="{{ cat }}"
          {% if request.GET.category == cat %}selected{% endif %}
        >{{ cat }}</option>
      {% endfor %}
    </select>
  </label>

  <!-- Height -->
  <label>
    Height:
    <select name="height">
      <option value="">Any</option>
      {% for ht_val, ht_label in all_heights %}
        <option
          value="{{ ht_val }}"
          {% if selected_height == ht_val|stringformat:"s" %}selected{% endif %}
        >{{ ht_label }}</option>
      {% endfor %}
    </select>
  </label>

  <!-- Attribute -->
  <label>
    Attribute:
    <select name="attribute">
      <option value="">Any</option>
      {% for attr in all_attributes %}
        <option
          value="{{ attr }}"
          {% if attr in selected_attributes %}selected{% endif %}
        >{{ attr }}</option>
      {% endfor %}
    </select>
  </label>

  <button type="submit">Filter</button>
</form>

<h1>All Badges</h1>

{% for category in all_categories %}
  <div class="badge-section">
    <h3>{{ category }} Badges</h3>
    <ul>
      {% for badg in badges %}
        {% if badg.category == category %}
          <li><a href="{% url 'badge_detail' badg.pk %}">{{ badg.name }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endfor %}

{% endblock %}
